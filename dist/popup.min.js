!function(n){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],n):"object"==typeof exports?module.exports=n(require("jquery"),require("jquery-ui")):window.popup=n(jQuery,null)}(function(n,i){var t=function(){this.config={width:"",height:"",title:"系统消息",content:"",hasCloseBtn:!0,skin:"window-default",alertBtnText:"确定",confirmBtnText:"确定",cancleBtnText:"取消",promptBtnText:"确定",hasMask:!0,isDraggable:!0,dragHandler:".window-header"},this.handlers={},this.boundingBox=null};return n.extend(t.prototype,{render:function(i){this.renderUI(),this.bindUI(),this.syncUI(),n("body").append(this.boundingBox),n(".window-boundingBox").css({width:this.config.width||"",height:this.config.height||"",left:this.config.x||this.config.width?"calc(50% - "+this.config.width/2+"px)":"calc(50% - "+n(".window-boundingBox").outerWidth()/2+"px)",top:this.config.y||this.config.height?"calc(50% - "+this.config.height/2+"px)":"calc(50% - "+n(".window-boundingBox").outerHeight()/2+"px)"})},renderUI:function(){var i="";switch(this.config.winType){case"alert":i='<button class="window-alert window-btn">'+this.config.alertBtnText+"</button>";break;case"confirm":i='<button class="window-confirm window-btn">'+this.config.confirmBtnText+'</button><button class="window-cancle window-btn">'+this.config.cancleBtnText+"</button>";break;case"prompt":i='<button class="window-prompt window-btn">'+this.config.promptBtnText+'</button><button class="window-cancle window-btn">'+this.config.cancleBtnText+"</button>",this.config.content='<p class="window-content">'+this.config.content+'</p><input type="text" class="window-text">'}if(this.boundingBox=n('<div class="window-boundingBox"><div class="window-header">'+this.config.title+'</div><div class="window-body"><div class="window-middle">'+this.config.content+'</div></div><div class="window-footer">'+i+"</div></div>"),this.config.hasMask&&(this.mask=n('<div class="window-mask"></div>'),n("body").prepend(this.mask)),this.config.hasCloseBtn){var t=n('<span class="window-close">×</span>');this.boundingBox.find(".window-header").append(t)}this.input=this.boundingBox.find("input")},bindUI:function(){var n=this;this.boundingBox.delegate(".window-alert","click",function(){n.fire("alert"),n.destroy()}).delegate(".window-close","click",function(){n.fire("close"),n.destroy()}).delegate(".window-confirm","click",function(){n.fire("confirm"),n.destroy()}).delegate(".window-cancle","click",function(){n.fire("cancle"),n.destroy()}).delegate(".window-prompt","click",function(){n.fire("prompt",n.input.val()),n.destroy()})},syncUI:function(){this.config.skin&&this.boundingBox.addClass(this.config.skin),this.config.isDraggable&&(this.config.dragHandler?this.boundingBox.draggable({containment:"window",handle:this.config.dragHandler}):this.boundingBox.draggable({containment:"window"}),this.boundingBox.css("position",""))},on:function(n,i){return this.handlers[n]||(this.handlers[n]=[]),this.handlers[n].push(i),this},fire:function(n,i){var t=this.handlers[n];Array.isArray(t)&&t.forEach(function(n){n(i)})},destroy:function(){this.destructor(),this.boundingBox.off(),this.boundingBox.remove()},destructor:function(){this.mask&&this.mask.remove()},alert:function(i){return n.extend(this.config,i,{winType:"alert"}),this.render(),this},confirm:function(i){return n.extend(this.config,i,{winType:"confirm"}),this.render(),this},prompt:function(i){return n.extend(this.config,i,{winType:"prompt"}),this.render(),this.input.focus(),this}}),new t});